#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass report
\begin_preamble
\usepackage{color}
\definecolor{updated}{rgb}{0.8,0.85,1}

\usepackage{numprint}

\providecommand{\versionortoday}{(Unknown version) - \today}

\providecommand{\recentlyupdated}{\emph\textsc\textcolor{updated}{ ~Updated!~ }}
\end_preamble
\use_default_options true
\begin_modules
logicalmkup
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_title "Master’s thesis"
\pdf_author "Joel Purra"
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder false
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Master’s thesis
\begin_inset Newline newline
\end_inset


\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
(Preliminary title)
\end_layout

\end_inset


\begin_inset Newline newline
\end_inset

Swedes Online: You Are More Tracked Than You Think
\end_layout

\begin_layout Author
Joel Purra
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "mig@joelpurra.se"
type "mailto:"

\end_inset

, joepu444
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://joelpurra.com/"

\end_inset


\begin_inset Newline newline
\end_inset

+46-70-3521212
\end_layout

\begin_layout Date
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
versionortoday
\end_layout

\end_inset


\end_layout

\begin_layout Abstract
How many companies are tracking you online, and how much information does
 the average Swede leak while using popular .se websites? Many, and a lot
 - more than you think.
 Large organizations 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
like A, B and C
\end_layout

\end_inset

 are able to connect the dots you leave behind during everyday usage, and
 construct a persona that reflects you from their perspective.
 Have you told your family, friends or colleagues about your gambling addiction,
 your sex toy purchases or your alcoholism? 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Replace with different scary personal information.
\end_layout

\end_inset

 Even if you didn't tell anyone your deepest secrets, these companies might
 conclude that they can put labels on you by looking at everything you do
 online.
 And now they are selling it as hard facts behind the scenes.
\end_layout

\begin_layout Abstract
While browsing the web users are both actively and passively being tracked
 by multiple companies, for the purpose of building a persona for targeted
 advertising.
 Sometimes the data collection is visible, as in social network sites and
 questionnaires, but it's most common in the form of different kinds of
 external resources which may or may not serve a purpose other than keeping
 track of your every click.
 Tracking code is installed on web pages that have adverts as well as those
 that do not - the spread and reach of tracking across web pages and domains
 of different kinds increases the quality of the user data collected and
 inferred, making it more valuable for advertising purposes.
 With the extent of the use of trackers and other external resources largely
 unknown and ever evolving, what is already known raises privacy concerns
 - data considered personal leak without the user's knowledge or explicit
 permission and end up in privately owned databases for further distribution.
 Data collection is the new wild west, and you are the new cattle.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Or Klondike and gold?
\end_layout

\end_inset


\end_layout

\begin_layout Abstract
To show the overlap between different domains, front pages of approximately
 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{900}
\end_layout

\end_inset

 Swedish top sites and 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{13000}
\end_layout

\end_inset

 randomly selected .se domains were visited and their resources, including
 those dynamically loaded, recorded.
 Resources were grouped by mime type, URL protocol, domain, path, if it
 matches the domain the request originated from and compared to lists of
 known trackers.
 In this thesis I show the use of resources internal versus external to
 the entry domain, which the most common confirmed trackers are, what spread
 they have and how much the average Swedish internet user can expect to
 be tracked by visiting some of the most import and popular sites in Sweden.
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Chapter
Introduction
\end_layout

\begin_layout Standard
This thesis is being written in the office of - and in collaboration with
 - .SE (The Internet Infrastructure Foundation), who graciously supported
 me with domain data and internet knowledge.
\end_layout

\begin_layout Section
Context
\end_layout

\begin_layout Standard
Part of .SE’s research efforts include continuously analyzing internet infrastruc
ture and usage in Sweden.
 Yearly reports convey the status of, for example, 
\emph on
Swedes and the internet
\emph default
 and 
\emph on
.se health status
\emph default

\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2012:healthstatus"

\end_inset

 to the public, both in Swedish
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/lar-dig-mer/rapporter/"

\end_inset


\end_layout

\end_inset

 and English
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/english/reports/"

\end_inset


\end_layout

\end_inset

.
 Information and statistics are also published on a separate portal, in
 collaboration with other organizations.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/vad-vi-gor/internetstatistik/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The report 
\emph on
.se health status
\emph default
 is based on data collected from around 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{900}
\end_layout

\end_inset

 .se domain names deemed of importance to the Swedish society as a whole,
 as well as random selection of 1% of the registered .se domain names.
 The research is focused on statistics about usage and security in DNS,
 IP, web and e-mail; the target audience is IT strategists, executives and
 directors.
 The thesis subject has been selected to be in line with the 
\emph on
.se health status
\emph default
 reports; results may be included in future reports, and code reused by
 both those reports and potentially other tools like .SE's public tool 
\emph on
Domain Check
\emph default
.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Add link to Domain Check.
\end_layout

\end_inset

 Data for the reports is analyzed and summarized by Anne-Marie Eklund Löwinder,
 a world-renown DNS and security expert
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/bloggare/anne-marie/"

\end_inset


\end_layout

\end_inset

, while the technical aspects and tools are under the supervision of Patrik
 Wallström, a well known DNSSEC expert and free and open source software
 advocate
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/bloggare/pawal/"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Section
People
\end_layout

\begin_layout Description
Student Joel Purra, master student for a Master of Science in Information
 Technology and Engineering, Linköping University, Sweden.
\end_layout

\begin_layout Description
University
\begin_inset space ~
\end_inset

examiner Niklas Carlsson, Associate Professor (Swedish: docent and universitetsl
ektor) at Division for Database and Information Techniques (ADIT), Department
 of Computer and Information Science (IDA), Linköping University, Sweden.
\end_layout

\begin_layout Description
Company
\begin_inset space ~
\end_inset

supervisor Patrik Wallström, Project Manager within R&D, .SE (The Internet
 Infrastructure Foundation), Sweden.
\end_layout

\begin_layout Description
Company
\begin_inset space ~
\end_inset

supervisor Staffan Hagnell, Head of New Businesses, .SE (The Internet Infrastruct
ure Foundation), Sweden.
\end_layout

\begin_layout Section
About The Internet Infrastructure Foundation
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/"

\end_inset


\end_layout

\end_inset

 (.SE)
\end_layout

\begin_layout Standard
.SE is also known as Stiftelsen för internetinfrastruktur (IIS).
\end_layout

\begin_layout Standard
The Internet Infrastructure Foundation is an independent organization, responsib
le for the Swedish top level domain, and working for the benefit of the
 public that promotes the positive development of the internet in Sweden.
 Their head office is in Stockholm.
 In 2012 they had 61 employees and a turnover of almost 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{120}
\end_layout

\end_inset

 MSEK.
\begin_inset CommandInset citation
LatexCommand cite
key ".SE:2013:annualreport"

\end_inset


\end_layout

\begin_layout Chapter
Background
\end_layout

\begin_layout Standard
In everyday web browsing, browsers routinely access a lot of material from
 other domains or services than the one visited.
\begin_inset CommandInset citation
LatexCommand cite
key "Feldmann:2004:MEI:1028788.1028833"

\end_inset

 These external resources vary from content that the user explicitly want
 to obtain, to implicitly loaded third party services, ads, and non-visible
 resources with the sole purpose of collecting user data and statistical
 material.
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 All are downloaded on behalf of the user with no or few limitations, and
 oftentimes without the user's need, understanding and explicit consent.
 These external resources can all be seen as browsing habit trackers, whose
 knowledge and power increase with any additional visits to other domains
 or services loading the same resources.
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868"

\end_inset


\end_layout

\begin_layout Section
Trackers are a commercial choice
\end_layout

\begin_layout Standard
While online privacy has been in the spotlight due to recently uncovered
 mass surveillance operations, the focus has been on national government
 intelligence agencies collecting information around the globe.
 They have been able to intercept traffic data and metadata by, among several
 techniques, covertly hooking into the internet infrastructure and passively
 listening.
 In contrast, external resources are approved by and actively installed
 by site and service owners, and presented openly to users with basic technical
 skills and tools.
 Reasons can be technical, for example because distributing resources among
 systems improves performance.
 Other times it is because there are positive network effects in using a
 third-party social network to promote content and products.
 More and more commonly, allowing a tracker to be installed can also become
 a source of income - data aggregation companies pay for access to users'
 data on the right site with the right quantity and quality of visitors.
 Because these external resources are used on behalf of the service, they
 are also loaded when end-to-end encryption with HTTPS is enabled for enhanced
 privacy and security.
 This encryption by-pass gives these private trackers more information than
 possible with large-scale passive traffic interception, even when there
 is a security nullifying mixture of encrypted and unencrypted connections.
\end_layout

\begin_layout Section
What is known by trackers?
\end_layout

\begin_layout Standard
Depending on what activities a user performs online, different things can
 be inferred by trackers on sites where they are installed.
 For example, a tracker on a news site can draw conclusions about interests
 from content a user reads (or choses 
\emph on
not
\emph default
 to) by tagging articles with refined keywords and creating an interest
 graph.
\begin_inset CommandInset citation
LatexCommand cite
key "Kumar:2013:GBT:2522548.2523129"

\end_inset

 The range of taggable interests of course depend on the content of the
 news site.
 Private and sensitive information leaked to third party sites during typical
 interaction with some of the most popular sites in the world include personal
 identification (full name, date of birth, email, ip address, geolocation)
 and sensitive information (sexual orientation, religious beliefs, health
 issues).
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868"

\end_inset

 Social buttons, allowing users to share links with a simple click, are
 tracking users whether they are registered, logged in or not.
\begin_inset CommandInset citation
LatexCommand cite
key "Roosendaal:2010:likethis"

\end_inset

 They are especially powerful when the user is registered and logged in,
 combining the full self-provided details of the user with their browsing
 habits - all within the bounds of the services' privacy policies agreed
 to by the user.
 Once a user has provided their personal information, it is no longer just
 the individual browser or device being tracked, but the actual person using
 it - even after logging out.
\begin_inset CommandInset citation
LatexCommand cite
key "Kontaxis:2012:PSP:2362793.2362823,Krishnamurthy:2008:CPO:1397735.1397744"

\end_inset

 This direct association, as opposed to inferred, to the person also allows
 for tracking across devices where there is an overlap of services used.
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Find a reference for cross device tracking.
\end_layout

\end_inset


\end_layout

\begin_layout Section
What is the information used for?
\end_layout

\begin_layout Standard
Publishers reserve areas of their web pages for displaying different kinds
 and sizes of advertisements alongside content.
 Ads chosen for the site may be aligned with the content but it is more
 valuable the more is known about the visitors.
 Combining and aggregating information from past visitors means that more
 information can be assumed about future visitors, on a statistical basis,
 which will define the general audience of the site.
 To generate even more revenue per displayed ad, individual users are 
\emph on
targeted
\emph default
 with personalized ads depending on their specific personal data and browsing
 history.
\begin_inset CommandInset citation
LatexCommand cite
key "Gill:2013:BPF:2504730.2504768"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about data aggregators selling information for other purposes than
 advertising.
\end_layout

\end_inset


\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
What kind of data can be collected by trackers, and how can they be aggregated
 both per person and per group of people?
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
How much does the average user know about external resources being trackers?
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Related work
\end_layout

\begin_layout Standard
Some research has been done surrounding ad networks, trackers and their
 spread on globally popular sites, as well as what kind of private data
 users can expect to more or less inadvertently share in the course of normal
 internet usage.
 Those papers show both some of the problems and solutions in trying to
 analyze external resources.
 The Association for Computing (ACM)
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://acm.org/"

\end_inset


\end_layout

\end_inset

 group SIGCOMM
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://sigcomm.org/"

\end_inset


\end_layout

\end_inset

 has a yearly Internet Measurement Conference (IMC)
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://sigcomm.org/events/imc-conference"

\end_inset


\end_layout

\end_inset

, where some papers of interest have been presented.
 The Passive and Active Measurements (PAM) Conference
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://pam2014.cs.unm.edu/"

\end_inset


\end_layout

\end_inset

 might also have interesting papers, as well as for example ACM's archives.
 As for individuals, one of the most connected researchers in this field
 is Balachander Krishnamurthy
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www2.research.att.com/~bala/papers/"

\end_inset


\end_layout

\end_inset

, who has worked with several groups looking at privacy in both online social
 networks (OSNs) and general websites.
\end_layout

\begin_layout Standard
.SE themselves have written papers analyzing the technical state of services
 connected to .se domains.
 While they haven't concentrated on exploring the web services connected
 to these domains, they do offer some groundwork in terms of selecting and
 grouping Swedish domains as well as looking at Google Analytics coverage.
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2011:healthstatus,Lowinder:2012:healthstatus"

\end_inset

 .SE's Internet Fund
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.internetfonden.se/"

\end_inset


\end_layout

\end_inset

 has also funded work on discussing and defining online privacy, aimed at
 those working with or developing systems that handle personal data, often
 with some kind of internet connection.
\begin_inset CommandInset citation
LatexCommand cite
key "Bylund:2013:978-91-87379-12-3:integritet"

\end_inset


\end_layout

\begin_layout Standard
Media have made reports regarding mass surveillance, especially by the United
 States intelligence agency National Security Agency (NSA)
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.nsa.gov/"

\end_inset


\end_layout

\end_inset

, but so far few papers seem to have been written.
 There are also reports on what data private companies are collecting, in
 part by their online efforts, and how they are packaging it for resale.
 While media reports aren't academic papers, they provide an up to date
 source of information needed in explaining parts of the thesis subject.
\end_layout

\begin_layout Chapter
Expected results
\end_layout

\begin_layout Standard
Previous research show that ads were used on 58% of internet's 500 most
 popular sites.
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 Google Analytics usage among Swedish top domains was 57% in 2011 and 62%
 2012.
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2011:healthstatus,Lowinder:2012:healthstatus"

\end_inset

 The assumption is that the number of external resources is at least as
 big, as they include both ads and Google Analytics.
 Technical reasons include cloud services hosting sites and services, content
 delivery networks becoming commonplace
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2000:AFI:347319.346248,Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 for scalable speed improvements and external service providers increasing
 their quality.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Add non-technical reasons.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Sites served over HTTPS are expected to use as many external resources as
 HTTP, even though some of these external resources might not be served
 over HTTPS as well.
\end_layout

\begin_layout Standard
News sites are expected to allow more trackers than other categories, as
 their income model include third party advertisements.
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 Commercial sites are expected to have more trackers than government sites.
\end_layout

\begin_layout Section
Direction and scope
\end_layout

\begin_layout Standard
Emphasis for the thesis will be on technical analysis, producing aggregate
 numbers regarding domains and external resources.
 Social aspects and privacy concerns are considered out of scope.
\end_layout

\begin_layout Standard
The thesis will primarily be written from a Swedish perspective.
 This is in part because .SE has access to the full list of Swedish .se domains,
 and part because of their previous work with the 
\emph on
.se health status
\emph default
 reports.
 Focus is to analyze .se domains in the reports, as they have already been
 deemed important and results can be incorporated in future reports.
 The main non-technical grouping is also based on the same reports; government,
 media, banks, larger websites, etcetera.
\end_layout

\begin_layout Standard
One assumption is that all external resources can act as trackers, even
 for static (non-script) resources with no capabilities to dynamically survey
 the user's browser, collecting data and tracking users across domains using
 for example the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Referer
\end_layout

\end_inset

 HTTP header
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

.
 While there are lists of known trackers, used by browser privacy tools,
 they are not 100% effective.
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868,Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 The lists will instead optionally be used to emphasize those external resources
 as 
\emph on
confirmed
\emph default
 trackers.
 While cookies used for tracking have been a concern for many, they are
 not necessary in order to identify most users upon return, even uniquely
 on a global level.
\begin_inset CommandInset citation
LatexCommand cite
key "Eckersley2009unique"

\end_inset

 Cookies will not be considered to be an indicator of tracking, as it can
 be assumed that a combination of other server and client side techniques
 can achieve the same goal as a tracking cookie.
\end_layout

\begin_layout Chapter
Methodology
\end_layout

\begin_layout Standard
Based on a list of domains, the front page of each domain is downloaded
 and parsed the way a browser would.
 The URL of each requested resource will be extracted, and associated with
 the domain they were loaded from.
 This data will then be classified in a number of ways, before being boiled
 down to statistics about the entire dataset.
 These aggregates are then compared between datasets.
\end_layout

\begin_layout Section
Related projects
\end_layout

\begin_layout Subsection
.SE Health Status
\end_layout

\begin_layout Standard
The thesis topic was chosen to align with the 
\emph on
.se health status
\emph default
, and one of the sources of lists of domains.
 Results from this and other runs may be included in future reports.
\end_layout

\begin_layout Subsection
HTTP Archive
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httparchive.org/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In an effort to measure web page speed on the internet, initially developed
 in October 2010, the HTTP Archive collects HAR data and runs analyses on
 them.
 Unfortunately, their data dumps are in a custom format, not the original
 HAR files, but there are some direct comparisons to be made with their
 
\emph on
Interesting stats
\emph default

\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httparchive.org/interesting.php"

\end_inset


\end_layout

\end_inset

 aggregate data.
\end_layout

\begin_layout Itemize
Pages Using Google Libraries API
\end_layout

\begin_layout Itemize
HTTPS Requests
\end_layout

\begin_layout Itemize
Total Requests per Page
\end_layout

\begin_layout Subsection
.SE Domain Check
\end_layout

\begin_layout Standard
In order to facilitate repeatable and improvable analysis, tools will be
 developed to perform the collection and aggregation steps automatically.
 .SE already has a set of tools that run monthly; integration and interoperabilit
y will smooth the process and continuous usage.
 There is also a public .SE tool to allow web site owners to test their own
 sites, 
\emph on
Domain Check
\emph default
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Add link to Domain Check.
\end_layout

\end_inset

, which might benefit from some of the code developed within the scope of
 this thesis.
\end_layout

\begin_layout Section
Questions
\end_layout

\begin_layout Standard
With domain and resource data in place, it will be aggregated to answer
 the following questions.
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Why are these questions important? Why were they chosen?
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Group questions by refined category?
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
What kinds of resources are there?
\end_layout

\begin_layout Itemize
How many resources are internal versus external per domain?
\end_layout

\begin_layout Itemize
What is the distribution of different kinds of resources?
\end_layout

\begin_layout Itemize
How many external resources are there, considering different levels of uniquenes
s:
\end_layout

\begin_deeper
\begin_layout Itemize
Unique URLs?
\end_layout

\begin_layout Itemize
Unique per file URL?
\end_layout

\begin_layout Itemize
Unique per folder URL?
\end_layout

\begin_layout Itemize
Unique per subdomain?
\end_layout

\begin_layout Itemize
Unique per domain?
\end_layout

\begin_layout Itemize
Unique per TLD?
\end_layout

\end_deeper
\begin_layout Itemize
On how many domains is each external resource is represented?
\end_layout

\begin_layout Itemize
How does usage of external resources differ between groups of domains?
\end_layout

\begin_layout Itemize
How to mark certain external resources as known trackers?
\end_layout

\begin_layout Itemize
What is the usage and distribution of known trackers?
\end_layout

\begin_layout Itemize
Are you as tracked using secure HTTPS as insecure HTTP?
\end_layout

\begin_layout Itemize
How do the results compare to
\end_layout

\begin_deeper
\begin_layout Itemize
Historical .se data, if readily available from earlier .SE status checks?
\end_layout

\begin_layout Itemize
Other ccTLDs?
\end_layout

\begin_layout Itemize
Commonly used gTLDs?
\end_layout

\begin_layout Itemize
Recently introduced newTLDs?
\end_layout

\end_deeper
\begin_layout Standard
Additional questions, which can be considered as bonuses
\end_layout

\begin_layout Itemize
Could any external resources actually be considered internal, despite being
 loaded from external domains?
\end_layout

\begin_layout Itemize
How to determine if a resource
\end_layout

\begin_deeper
\begin_layout Itemize
Crosses Sweden's borders in transit?
\end_layout

\begin_layout Itemize
Is handled by an organization with base or ownership outside of Sweden?
\end_layout

\end_deeper
\begin_layout Itemize
Which external resources are loaded from Sweden and abroad respectively?
\end_layout

\begin_layout Itemize
What user data could potentially be collected, and subsequently inferred?
\end_layout

\begin_layout Itemize
To what extent can the average Swedish internet user's browsing habits be
 correlated across the most commonly visited webpages?
\end_layout

\begin_layout Section
Potential problems
\end_layout

\begin_layout Itemize
Due to the dynamic nature of modern web pages, a static HTML analysis might
 not be enough.
 How can pages with dynamic script loading be analyzed?
\end_layout

\begin_layout Itemize
Script aggregation and concatenation could give misleading numbers if only
 analyzed per URL.
 Is it possible to detect which known scripts are actually running?
\end_layout

\begin_layout Itemize
Can Google Tag Manager
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.google.com/tagmanager/"

\end_inset


\end_layout

\end_inset

 scripts, which is script aggregation with asynchronous loading directed
 specifically to marketers, be analyzed to show each included service?
\end_layout

\begin_layout Itemize
Can collected data served by different services differ depending on which
 tool is used to fetch the data?
\end_layout

\begin_layout Itemize
Does content and external resources vary between requests? Is it time dependent,
 or regenerated for each request? One example would be often-updated news
 sites or blogs, where new content is added and old replaced.
 Another would be ads, which might be loaded from different sources per
 request.
\end_layout

\begin_layout Itemize
Many of the external resources will be overlapping, and downloading them
 multiple times can be avoided by caching the file the first time in a run.
 Would keeping a local cache of recently requested URLs affect the results?
\end_layout

\begin_layout Itemize
Automated downloading of webpages, especially downloading several in short
 succession, can be seen by site and service owners as disruptive by using
 system resources and skewing statistical data.
 Traversing different pages on a single website can also be detected by
 looking at for example navigational patterns.
\begin_inset CommandInset citation
LatexCommand cite
key "Tan:2002:DWR:593432.593521,Lourenco:2006:CWC:1145581.1145634"

\end_inset

 By only downloading the domain root page and associated resources this
 tool might not fall into that category of detection.
 Will automated collection done for this report be detected and hindered?
\end_layout

\begin_layout Chapter
Software
\end_layout

\begin_layout Section
Third party tools
\end_layout

\begin_layout Standard
In order to download and analyze thousands of webpages in an automated fashion,
 a set of suitable tools were sought.
 Tools that are released as free and open source software have been preferred,
 and the tools written for the thesis have also been released as such.
 Development was performed in the Mac OS X operating system, but is thought
 to be runnable on other Unix-like platforms with relative ease.
\end_layout

\begin_layout Subsection
HTTP Archive (HAR) format
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.softwareishard.com/blog/har-12-spec/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In an effort to record and analyze network traffic as seen by individual
 browsers, the data/file format HTTP Archive (HAR) was developed.
 Browsers such as Google Chrome implement it as a complement to the network
 graph shown in the Developer Console, from where a HAR file can be exported.
 While constructed to analyze for example web performance, it also contains
 data suitable for this thesis: requested URLs and HTTP request/response
 headers such as referrer and content type.
 HAR files are based upon the JSON standard 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Insert a link to the JSON standard.
\end_layout

\end_inset

, which is a Javascript object compatible data format commonly used to communica
te dynamic data between client side scripts in browsers and web servers.
 The most recent specification at the time of writing was HAR 1.2.
\end_layout

\begin_layout Subsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://phantomjs.org/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Accessing webpages is normally done by users in a graphical browser; the
 browser downloads then displays images, executes scripts, plays videos.
 A browser is user friendly but not optimal for batch usage due to the overhead
 in constantly drawing results on screen and the lack of automation without
 external tools such as Selenium Webdriver 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Insert link to Selenium Webdriver.
\end_layout

\end_inset

.
 A good alternative is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

, which is built as a command line tool without any user interface.
 It acts like a browser internally, including rendering the webpage to a
 image buffer that isn't displayed, and is controllable through the use
 of scripts.
 One such example script included in the default installation generates
 HAR files from a webpage visit.
\end_layout

\begin_layout Subsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://stedolan.github.io/jq/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
While there are command line tools to transform data in for example plain
 text, CSV and XML files, tools to work with JSON files are not as prevalent.
 One such tool gaining momentum is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset

, which is implemented with a domain specific language (DSL) suitable for
 extracting or transforming data.
 The DSL is based around a set of filters, similar to pipes in the Unix
 world, transforming the input and passing it on to the next stage.
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset

 performs well with large datasets, as it treats data as a stream where
 each top-level object is treated separately.
\end_layout

\begin_layout Subsection
GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "Tange2011a"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.gnu.org/software/parallel/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
To parallelize task execution, GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset

 has been used.
 It allows an input file to be distributed among several processes/CPU cores,
 and the results to be combined into a single file.
 It helps speed up downloading of HAR files, and processing of the JSON
 data through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset

.
\end_layout

\begin_layout Section
Code
\end_layout

\begin_layout Standard
In order to efficiently and repeatably download and analyze web pages, special
 tools have been written.
 The source code for the respective projects have been released to the public
 under GNU General Public License version 3.0 (GPL-3.0)
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.gnu.org/licenses/gpl.html"

\end_inset


\end_layout

\end_inset

, so other projects can make use of them as well.
\end_layout

\begin_layout Subsection
har-heedless
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/har-heedless"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Quotation
Scriptable batch downloading of webpages to generate HTTP Archive (HAR)
 files, using 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
With a simple text file with one domain name per line as input, har-heedless
 downloads all of their front pages.
 Downloads can be made either in serial or in parallel.
 The resulting HAR data is written in a folder structure per domain, with
 a timestamp in the file name.
 The script that extracts HAR data, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

, is based on example code shipped with 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

, but modified to be more stable.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
get/netsniff.js
\end_layout

\end_inset


\end_layout

\begin_layout Standard
A modified version of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 from the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

 project.
\end_layout

\begin_layout Standard
Some fixes include:
\end_layout

\begin_layout Itemize
Stable, logged output when resources failed to download.
\end_layout

\begin_layout Itemize
Adding error messages as HAR comments.
\end_layout

\begin_layout Itemize
Adding a base64 encoded page screenshot as an extended field.
\end_layout

\begin_layout Itemize
Waiting a period of time after downloading the web page before generating
 output, to let asynchronous downloading, processing and rendering finish.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
get/har.sh 
\emph on
url
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Contains logic to run 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

.
 If 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

 crashed or otherwise encountered an error, a fallback HAR file is generated
 with only a dummy response explaining that an error occurred.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domain.single.sh 
\emph on
domain
\emph default
 [--screenshot <true|false>]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Downloads the front page of a single domain, and takes care of writing the
 HAR output to the correct folder and file.
 If a screenshot has been requested, it is extracted (and removed) from
 the extended HAR data and written to a separate file parallel to the resulting
 HAR file.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domain/parallel.sh [parallel-processes [--screenshot <true|false>]] 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Uses GNU parallel to download multiple webpages at a time.
 The number of separate processes running is adjusted per machine, depending
 on capacity, with 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel-processes
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsection
har-dulcify
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/har-dulcify"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Quote
Extract data from HTTP Archive (HAR) files, quite possibly downloaded by
 har-heedless, for some aggregate analysis.
\end_layout

\begin_layout Standard
HAR files by themselves contain too much data, so the relevant parts need
 to be extracted.
 The extracted parts are then broken down into smaller parts that are easier
 to group and analyze, and added to the data alongside the original.
 With the expanded data in place, requests are classified by basic measures
 and matched against external datasets.
 Scripts are written to perform only a limited task and instead be chained
 together by piping the data between them.
 As the scripts generally connect in only one way, the convenience scripts
 in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/
\end_layout

\end_inset

 folder are mostly used.
 These convenience scripts also leave the files from partial executions,
 so the can be used for other kinds of analysis.
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about more scripts.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
At the time of writing, there are 32 scripts in har-dulcify.
 Here's a selection with explanations.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/all.sh [har-folder-path]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Runs 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
preparations.sh
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
data.sh
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate.sh
\end_layout

\end_inset

 based on data in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
har-folder-path
\end_layout

\end_inset

 (defaulting to the current folder) outputting the results to the current
 folder.
 This is the true one-shot script you want to run for one off analysis.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/preparations.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Downloads, prepares and analyses third party data sets, and puts them in
 the current folder for use by subsequent scripts.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/data.sh [har-folder-path]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Processes all HAR files in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
har-folder-path
\end_layout

\end_inset

 (defaulting to the current folder), and puts the output in the same folder.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/aggregate.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Prepares data for aggregation by counting occurrences in each domain's data,
 then adds them together to a single file containing an aggregate analysis.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domains/latest/all.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Finds and lists the paths to the most recent HAR files, per domain.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
extract/request/parts.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Extracts url, status, content-type (mime-type) etcetera from the originating
 domain front page request and the subsequent requests.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
extract/request/expand-parts.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Keeps the original data, but also expands the url and mime-type into their
 respective parts, and adds simple grouping to status and mime-type.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/basic.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Add basic classifications, such as if a request is internal or external
 to the originating domain, and if the request is secured with HTTPS.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/add.sh 
\family roman
\emph on
prepared-disconnect-dataset-path
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Matches each requested domain against Disconnect's list of domains to block,
 and adds the results to the output.
 Disconnect's original 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
service.json
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/disconnectme/disconnect/raw/master/firefox/content/disconnect.safariextension/opera/chrome/data/services.json"

\end_inset


\end_layout

\end_inset

 (or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
disconnect-plaintext.json
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://services.disconnect.me/disconnect-plaintext.json"

\end_inset


\end_layout

\end_inset

) needs to be prepared through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/prepare-service-list.sh
\end_layout

\end_inset

 before being used.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/effective-tld/add.sh 
\family roman
\emph on
prepared-disconnect-dataset-path
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Matches each requested domain against Mozilla's Public Suffix list of effective
 top level domain names, and adds the results to the output.
 The original 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
effective_tld_names.dat
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://publicsuffix.org/list/effective_tld_names.dat"

\end_inset


\end_layout

\end_inset

 needs to be prepared through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/effective-tld/prepare-list.sh
\end_layout

\end_inset

 before being used.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate/prepare.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write here.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate/prepare2.sh
\end_layout

\end_inset


\begin_inset Note Note
status open

\begin_layout Plain Layout
Rename this script?
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Running the aggregation before analysis is currently not possible in a single
 step, as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset

 requires all data for the reduce step to be in memory.
 The solution is to first map the data to a suitable format, and then reduce
 them in chunks repeatedly.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate/analysis.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Takes counts and lists of values, and reduces them to easy to present values,
 percentages and top lists.
\end_layout

\begin_layout Chapter
Data sources
\end_layout

\begin_layout Section
Domains
\end_layout

\begin_layout Standard
Statistics regarding each list of domains is presented in an appendix.
\end_layout

\begin_layout Subsection
.SE Health Status domains
\end_layout

\begin_layout Standard
When .SE performs their annual .se health status report, they use an in-house
 curated list of domains of national interest.
 These domains are mostly from the .se zone and cover government, county,
 municipality, university and college, government-owned company, bank and
 insurance, internet service provider (ISP), domain registrar, and media
 domains.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about health status domains.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Random .se domains
\end_layout

\begin_layout Standard
The thesis was written in collaboration with .SE, which runs the .se TLD,
 and the work focusing on the state of Swedish domains.
 Initial script development was done using a sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 random domains, most often tested in groups of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100}
\end_layout

\end_inset

.
 Final results were collected from a sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100000}
\end_layout

\end_inset

 domains, chosen at random from the database of active domains in the zone.
 The .se is to be considered Sweden-centric.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about .se domains.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Random .dk domains
\end_layout

\begin_layout Standard
The Danish .dk TLD organization, DK Hostmaster A/S
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.dk-hostmaster.dk/"

\end_inset


\end_layout

\end_inset

, helped out with a sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 domains, chosen at random from the database of active domains in the zone.
 The zone was exported by DK Hostmaster staff 2014-07-07.
 The .dk is to be considered Denmark-centric.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about .dk domains.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Random .com, .net, .name domains
\end_layout

\begin_layout Standard
The maintainers of the .com, .net and .name TLDs, Verisign, allow downloading
 of complete lists of domains under an agreement.
 This allows for a random selection of sites from around the world, as the
 .com TLD is the biggest, even though usage is not geographically uniform
 - both in terms of registrations and actual usage.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about Verisign domains.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Alexa Top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://alexa.com/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Alexa, owned by Amazon, is a well-known source of top sites
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.alexa.com/topsites"

\end_inset


\end_layout

\end_inset

 in the world.
 It is used in many research papers, and can be seen as the standard data
 set.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
List referenced research papers using it.
\end_layout

\end_inset

 Their daily 1-month average traffic rank top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset

 list is freely available for download.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://alexa.zendesk.com/hc/en-us/articles/200449834-Does-Alexa-have-a-list-of-its-top-ranked-websites-"

\end_inset


\end_layout

\end_inset

 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about Alexa.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Reach50
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://reach50.com/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The top 50 sites in Sweden are presented by by Webmie
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://webmie.com/"

\end_inset


\end_layout

\end_inset

, who base their list on data from a a user panel.
 The panelists have installed an extension into their browser, tracking
 their browsing habits by automated means.
 They also have results grouped by panelists categories: women, men, age
 16-34, 35-54, 55+.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about Reach50.
\end_layout

\end_inset


\end_layout

\begin_layout Section
External datasets
\end_layout

\begin_layout Subsection
Disconnect's blocking list
\end_layout

\begin_layout Standard
One of the most popular privacy tools is Disconnect, which blocks tracking
 sites by running as a browser plugin.
 Disconnect was started by ex-Google engineers, and seems to still have
 close ties to Google.
\end_layout

\begin_layout Standard
The Disconnect software lets users block/unblock loading resources from
 specific third-party domains.
 A list of 2143 domains is used as the basis from the blocking.
 Each entry belongs to an organization, including a link to the organizations
 webpage.
 There is also a grouping into categories, here shown with some examples.
 Worth noting is that the content category isn't blocked by default.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about top results in datasets.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Advertising
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Add technorati.com, wpp.com?
\end_layout

\end_inset


\end_layout

\begin_layout Description
overture.com Yahoo's ad network.
\end_layout

\begin_layout Description
omniture.com Adobe's ad network.
\end_layout

\begin_layout Description
amazon-adsystem.com Amazon's ad delivery network.
\end_layout

\begin_layout Subsubsection
Analytics
\end_layout

\begin_layout Description
alexa.com Amazon's web statistics service, considered an authority in web
 measurement.
\end_layout

\begin_layout Description
comscore.com Analytics service that also publishes statistics.
\end_layout

\begin_layout Description
gaug.es GitHub's analytics service.
\end_layout

\begin_layout Description
coremetrics.com Part of IBM's enterprise marketing services.
\end_layout

\begin_layout Description
newrelic.com A suite of systems monitoring and analytics software, up to
 and including browsers.
\end_layout

\begin_layout Description
nielsen.com Consumer studies.
\end_layout

\begin_layout Description
statcounter.com Web statistics tool.
\end_layout

\begin_layout Description
webtrends.com Digital marketing analytics and optimization across channels.
\end_layout

\begin_layout Subsubsection
Content
\end_layout

\begin_layout Standard
Sites that deliver content.
 There is a wide variety of content, from images and videos to A/B testing,
 comment and helpdesk services.
 This category is not blocked by default.
\end_layout

\begin_layout Description
brightcove.com Video hosting/monetization service.
\end_layout

\begin_layout Description
disqus.com A third party comment service.
\end_layout

\begin_layout Description
flickr.com Flickr is a photo/video hosting site, owned by Yahoo.
\end_layout

\begin_layout Description
instagram.com Facebook's photo/video sharing site.
\end_layout

\begin_layout Description
office.com Microsoft's Office suite online.
\end_layout

\begin_layout Description
optimizely.com An A/B testing service.
\end_layout

\begin_layout Description
truste.com Provides certification and tools for privacy policies in order
 to gain users' trust; “enabling businesses to safely collect and use customer
 data across web, mobile, cloud and advertising channels.” This includes
 ways to selectively opt-out from cookies features; required, functional
 or advertising.
\end_layout

\begin_layout Description
tumblr.com A popular blogging platform.
\end_layout

\begin_layout Description
uservoice.com A customer support service.
\end_layout

\begin_layout Description
vimeo.com A video site.
\end_layout

\begin_layout Description
youtube.com Google's video site.
\end_layout

\begin_layout Subsubsection
Disconnect
\end_layout

\begin_layout Standard
A special category for Facebook, Google and Twitter.
 It seems to initially have been designed to block their respective like/+1/twee
t buttons, but also contains other known tracking domains belonging to the
 same organization.
\end_layout

\begin_layout Standard
It's worth noting that adwords.google.com, doubleclick.net, admob.com and several
 other of Google's ad networks, are listed here.
\end_layout

\begin_layout Subsubsection
Social
\end_layout

\begin_layout Standard
Site with an emphasis on social aspects.
 They often have buttons to vote for, recommend or share with others.
\end_layout

\begin_layout Description
addthis.com A link sharing service aggregator.
\end_layout

\begin_layout Description
digg.com News aggregator.
\end_layout

\begin_layout Description
linkedin.com Professional social network.
\end_layout

\begin_layout Description
reddit.com Social new and link sharing, and discussion.
\end_layout

\begin_layout Subsection
Public suffix list
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://publicsuffix.org/"

\end_inset


\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/Public_Suffix_List"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In the domain name system, it is not always obvious what parts of a domain
 name are a public suffix and which are open for registration by Internet
 users.
 The main example is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.co.uk
\end_layout

\end_inset

, where the public suffix 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
co.uk
\end_layout

\end_inset

 is to different from the TLD 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
uk
\end_layout

\end_inset

.
 Because HTTP cookies are based on domains names, it is important to browser
 vendors to be able to recognize which parts are public suffixes to be able
 to protect users against supercookies
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/HTTP_cookie#Supercookie"

\end_inset


\end_layout

\end_inset

; cookies which are scoped to a public suffix, and therefore readable across
 all web sites under that public suffix.
 The same dataset is also useful for grouping domains without improperly
 counting 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.co.uk
\end_layout

\end_inset

 as a 
\emph on
user-owned subdomain
\emph default
 of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
co.uk
\end_layout

\end_inset

, which would then render 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
co.uk
\end_layout

\end_inset

 as the most popular domain under the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
uk
\end_layout

\end_inset

 TLD.
\end_layout

\begin_layout Standard
Swedish examples include second level domains 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
pp.se
\end_layout

\end_inset

 for privately owned domains and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
tm.se
\end_layout

\end_inset

 for trademarks
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/data/barred_domains_list.txt"

\end_inset


\end_layout

\end_inset

.
 These second level domains were more important before April 2003
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/.se#Pre_2003_system"

\end_inset


\end_layout

\end_inset

, when first level domain registration rules restricted registration to
 nation-wide companies, associations and authorities.
\end_layout

\begin_layout Standard
The public suffix list specification contains an algorithm for certain wildcard
 rules that have exceptions, which this thesis has not implemented fully.
 These 10 exception were deemed insignificant, as 7 of them are Japanese
 cities grouped by geographic areas and the remaining 3 seem to belong to
 ccTLD owner organizations.
\end_layout

\begin_layout Chapter
Retrieving websites and resources
\end_layout

\begin_layout Section
Computer machines
\end_layout

\begin_layout Standard
Two computers were used to download web pages - one laptop machine and one
 server machine.
 The server is significantly more powerful than the laptop, and they downloaded
 a different number of web pages at a a time.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="6">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Machine
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OS, version
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CPU architecture
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CPU cores
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Core speed (MHz)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Memory (GB)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Laptop
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mac OS X 10.9.2 Mavericks
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
x86/64 bit
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2800}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Debian GNU/Linux 8 Jessie/Sid
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
x86/64 bit
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2500}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
16
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Network connection
\end_layout

\begin_layout Standard
The laptop machine was connected by ethernet to the .SE office network, which
 is shared with employees' computers.
 The server machine was connected to server co-location network, which is
 shared with other servers.
 The .SE network technicians said load was kept very low, and only a few
 percent of the dedicated 100 Mbps per location was used.
 Both locations are in Stockholm city, and should therefore be well placed
 in regard to web sites hosted in Sweden.
\end_layout

\begin_layout Section
Software considerations
\end_layout

\begin_layout Standard
To expedite an automated and repeatable process, a custom set of scripts
 were written as the project har-heedless.
 The scripts are written using standard tools, available as open source
 and on multiple platforms.
\end_layout

\begin_layout Subsection
Dynamic web pages
\end_layout

\begin_layout Standard
Previous efforts to download and analyze web pages by .SE used a static approach,
 analyzing the HTML by means of simple searches for 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset

 strings in HTML and CSS.
 It had proven hard to maintain, and the software project was abandoned
 before the thesis was started, but hadn't yet been replaced.
 In order to better handle the dynamic nature of modern web pages, the headless
 browser phantomjs was chosen, as it would also download and execute javascript
 - a major component in both user interfaces as well as active trackers
 and ads.
\end_layout

\begin_layout Subsection
Flash files
\end_layout

\begin_layout Standard
Flash is a scriptable proprietary cross-platform vector based web technology
 owned by Adobe.
 Several kinds of content, including video players, games and ads, use Flash
 because it has historically been better suited than javascript for in-browser
 moving graphics and video.
 Flash usage has not been considered for this thesis as the technology isn
 not available on all popular web browsing platforms, notably Apple's iPad,
 and is being phased out by HTML 5 features such as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<canvas>
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<video>
\end_layout

\end_inset

 elements.
\end_layout

\begin_layout Subsection
Combined javascript
\end_layout

\begin_layout Standard
A common technique for speeding up web sites is to reduce the number of
 resources the browser needs to download, by combining or concatenating
 them in different ways depending on the file format.
 Javascript is a good example where there are potential benefits
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/speed/docs/best-practices/rtt#CombineExternalJS"

\end_inset


\end_layout

\end_inset

 since functionality often is spread across several files, especially after
 the plugin style of frameworks such as jQuery
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://jquery.com/"

\end_inset


\end_layout

\end_inset

 emerged.
 One concern is whether or not script concatenation on a web page would
 affect script analysis at a later stage, by reducing the number of third-party
 requests.
 While it's hard to analyze all scripts, based on their wide spread use,
 third-party scripts stay on their respective home servers as software as
 a service (SaaS) to enable faster update cycles and tracking of HTTP requests.
\end_layout

\begin_layout Subsection
Google Tag Manager
\begin_inset CommandInset label
LatexCommand label
name "sub:Google-Tag-Manager"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.google.com/tagmanager/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
One of the concerns was Google Tag Manager (GTM), which a script aggregation
 service with asynchronous loading directed specifically to marketers.
 Google provides builtin support for their AdWords, Analytics (GA) and DoubleCli
ck (DC) services.
 While simplifying management with only one 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<script>
\end_layout

\end_inset

 tag, each part should download separately and perform the same duties,
 including “calling home” to the usual addresses.
 In order to confirm this, a query was run on one of the data sets.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Percentage
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dataset
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2014-07-25 100k server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Domains with HAR data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
99952
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100%
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Domains with GTM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1307
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.3%
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Requests to GA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2980
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Requests to DC
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2019
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GA/GTM domain coverage
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1105
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
85%
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DC/GTM domain coverage
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
738
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
56%
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GA+DC/GTM domain coverage
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1307
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
100%
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
The numbers point to every domain that uses Google Tag Manager uses at least
 one of Google Analytics and DoubleClick, and will therefore not obscure
 information regarding which services are called when further analyzed.
\end_layout

\begin_layout Subsection
Parallelizing downloads
\end_layout

\begin_layout Standard
A lot of the time spent downloading a web page is spent waiting for network
 resources, especially during timeouts during retrieval.
 To speed up downloading large amounts of web pages, parallelizing was employed
 using simple scripting techniques, starting multiple processes at once
 in batches, waiting for each batch to finish before starting the next.
 This was deemed inefficient, as the download and rendering speed of the
 slowest web page would be a bottle neck.
 In a later script versions, GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset

 was used, with a setting to not start more jobs if the current CPU/system
 load was too high.
\end_layout

\begin_layout Standard
During initial parallelizing tests, the laptop machine was shown to be able
 to handle 100 domain downloads in parallel, but this was later scaled down
 to ensure system overload would not affect results, at the cost of significantl
y longer download times.
\end_layout

\begin_layout Subsection
Screen size
\end_layout

\begin_layout Standard
When 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

 is running, it emulates having a browser window by keeping an internal
 graphics buffer.
 Even if web page isn't rendered and shown on screen, it still has a screen
 size, which affects layout.
 With a bit of javascript or responsive CSS, the screen size can affect
 downloaded resources.
 Javascript can be used to delay download of images and other resources
 that are 
\emph on
below the fold
\emph default
, meaning outside of the initial view the user has without scrolling in
 any direction, as a page speed improvement.
 Responsive CSS adapts the page style to the screen size in order to increase
 usability for for example mobile users, and might optimize the quality
 of downloaded images to match the screen size.
\end_layout

\begin_layout Standard
By default, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

 uses the physical computer's primary screen size.
 In order to reduce differences between the laptop and server machines,
 a fixed emulated window size of 1024x768 pixels was chosen.
 The basis for this is that 1024x768 pixel resolution screens have been
 the recommended screen size to design for
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.nngroup.com/articles/screen-resolution-and-page-layout/"

\end_inset


\end_layout

\end_inset

 for a long time
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.nngroup.com/articles/computer-screens-getting-bigger/"

\end_inset


\end_layout

\end_inset

, and it still is a common screen size
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://gs.statcounter.com/#resolution-ww-monthly-201307-201407"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Scripted browser scrolling (vertically) through the page has not been performed,
 thus javascript scrolling events triggering for example downloading of
 images below the fold are not guaranteed.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Check if all images are automatically downloaded by phantomjs, as if the
 page had been scrolled, as they seem present in screenshots.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Screenshots
\end_layout

\begin_layout Standard
In order to visually being able to confirm that web pages have been downloaded
 correctly, a PNG screenshot can optionally be taken when the page has finished
 downloading.
 There is a processing cost associated with taking screenshots; it takes
 time for 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
phantomjs
\end_layout

\end_inset

 to render the internal buffer as an image, convert it to base64 encoding
 for the augmented HAR data, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
jq
\end_layout

\end_inset

to extract the image data, the system to convert the data back to binary
 and finally write it to disk.
 Extra processing is also needed to remove the screenshot from the augmented
 HAR file.
\end_layout

\begin_layout Standard
The emulated browser window size also sets a limit on the screenshot size
 when rendered, but the entire browser canvas is captured.
 This means that screenshots that are saved to disk in most cases extend
 beyond the viewport size, most often vertically; this corresponds to scrolling
 through the entire page.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Dataset
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
PNG files (MB)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
HAR files (MB)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ratio
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2014-07-25 100k server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{43000}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{4900}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8.8:1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2014-08-04 health-status server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{693}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{110}
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6.3:1
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
The ratio of PNG to HAR data size on disk points to the compressed PNG files
 being up to 10 times the size of the uncompressed HAR files for certain
 types of pages, for example media domains in the 
\emph on
.se health status
\emph default
 report dataset.
\end_layout

\begin_layout Section
System load during downloads
\end_layout

\begin_layout Standard
System load can affect the end results, if network timeouts occur during
 downloading and processing of domains' front pages.
 Apart from CPU and memory limitations, the other users of the .SE network
 should not be affected by tests.
\end_layout

\begin_layout Standard
System load on *NIX systems can be found using the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
uptime
\end_layout

\end_inset

 command.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/Load_(computing)"

\end_inset


\end_layout

\end_inset

 Other processes were running at the time of these tests, so the numbers
 are not exclusive to the downloading.
 The complexity of the front pages of the currently processed domains affects
 the load, as well if screenshot generations is enabled.
 Most downloads were done with screenshots enabled.
 The table below show loads for a single sample.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Machine
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Concurrent downloads
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Load
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Load per core
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Laptop
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.5
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Laptop
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7.0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.5
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Server
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.5
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Test more load.
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Failed domains
\end_layout

\begin_layout Standard
Some web sites are not downloaded successfully, for different reasons.
 The DNS settings might not be correct, the server may be shut down, there
 might have been a temporary network timeout, there might have been a software
 error - or the server has been programmed to not respond to automated requests
 from PhantomJS and similar tools.
 Unfortunately, outside of software errors, they are hard to detect without
 external analysis of connectivity.
 Each HTTP request has their HTTP status response recorded if it is available;
 absence or numbers outside the RFC2616 range (100-599) indicates failure.
 Any error output the web page itself has produced, through javascript errors
 etcetera, have also been recorded in the HAR log or individual entry/request
 comment fields.
\end_layout

\begin_layout Standard
A distinction is made between 
\emph on
failed
\emph default
 and 
\emph on
unsuccessful
\emph default
 domains - unsuccessful domains rendered a complete response with a HTTP
 status that indicated that it was not successful.
 Pages that were unsuccessful have been re-downloaded for testing purposes.
 It seems that re-downloading helps with some, but not all, failures.
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about which datasets were re-downloaded.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Insert re-downloading table for at least one dataset.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The first round of retries rendered the greatest results, and subsequent
 retries are less successful.
 This seem to point to intermittent failures being recoverable, and that
 some domains will not respond.
\end_layout

\begin_layout Chapter
Analyzing resources
\end_layout

\begin_layout Standard
After downloading HAR files, they are processed using har-dulcify.
 Most steps can be split up into chunks and run in parallel, which is what
 the one-shot scripts do.
\end_layout

\begin_layout Section
Screenshots
\end_layout

\begin_layout Standard
Screenshots were mainly used for verification during development, to see
 that the pages were loaded properly.
 While they have been retained, the manual inspection necessary makes it
 infeasible as a way to verify each and every domain's result.
\end_layout

\begin_layout Section
The HAR format
\end_layout

\begin_layout Standard
The specification includes fields that have to do with for example request/respo
nse timings and data sizes.
 Those, and other fields, are not analyzed in this thesis, so the first
 step is to extract the relevant information.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
URL The request's URL.
 Recorded whether the request is successful or not.
 Values outside of those starting with 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://
\end_layout

\end_inset

 or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset

 are mostly ignored.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Status The HTTP status code
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://tools.ietf.org/html/rfc2616"

\end_inset


\end_layout

\end_inset

 found in the server's response.
 Defined as a 3-digit integer result, 100-599, grouped into classes by the
 first digit.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Mime-type The HTTP content-type header, which is the body internet media
 type (previously known as Multipurpose Internet Mail Extensions (MIME)
 type, or ) combined with optional parameters, such as character encoding.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Referer The URL of the page that requested the resource.
 Can be used to build a tree of requests, but is limited by the fact that
 it requires HTML 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<frame>
\end_layout

\end_inset

 or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<iframe>
\end_layout

\end_inset

 to differ from the origin page.
 The word referrer was misspelled 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
referer
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wiktionary.org/wiki/referer"

\end_inset


\end_layout

\end_inset

 in the original proposal
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://tools.ietf.org/html/rfc1945"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Redirect The URL of the new location of the requested resource, if defined
 by a 3xx HTTP status.
\end_layout

\begin_layout Standard
These properties will be enough to see what kinds of resources are requested,
 if requests are successful and where the request is made to.
\end_layout

\begin_layout Section
Expanding parts
\end_layout

\begin_layout Subsection
URL, referer, redirect
\end_layout

\begin_layout Standard
The URL format has several components
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://tools.ietf.org/html/rfc3986"

\end_inset


\end_layout

\end_inset

, with interesting ones for web listed and/or split up further here.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Scheme In this case, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https
\end_layout

\end_inset

 protocols have been the most interesting to look at.
 Other interesting examples that can be found in the wild include 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
ftp
\end_layout

\end_inset

 (for file downloads), 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
data
\end_layout

\end_inset

 (for resources encoded into the URI) and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
about
\end_layout

\end_inset

 (mostly used for blank placeholder pages).
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Domain For this thesis, the domain part has been of a lot of interest, as
 it signifies the difference between internal and external resources.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Port While custom ports can be used, they usually implicitly default to
 80 for HTTP and 443 for HTTPS.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Path The path specifies a folder or file on the server.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Querystring Most parameters sent back to servers are defined in an RFC compliant
 way, but there are other variants building on for example `/` as a pseudo-path
 separator.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Fragment The fragment is in the web context a client-only component, and
 is not to be sent back to the server as part of a request.
 The usage affects browsers' presentation, historically only by scrolling
 to a matching named element, but modern usage includes keeping browser
 state using javascript, for example following the web spider crawlable
 hash-bang syntax
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/webmasters/ajax-crawling/docs/getting-started"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about URLs.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Status
\end_layout

\begin_layout Standard
The status is grouped into their defined groups by the first digit.
 Groups outside of the defined range 100-599 are defined as null.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
1xx Information
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2xx 
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
3xx Redirection
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
4xx 
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
5xx Server errors
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Fill out the proper HTTP status group headings.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Mime-type
\end_layout

\begin_layout Standard
The mime-type is grouped by their usage, which usually is the first group
 part.
 Here is a selection of common types grouped together.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Group
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Types
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
script
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
application/javascript, application/x-javascript, text/javascript
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
font
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
application/font-woff, application/x-woff, application/x-font-ttf, font/ttf,
 font/opentype
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
data
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
application/json, application/octet-stream, application/xml
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
image
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
image/gif, image/jpeg, image/png, image/svg+xml
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
style
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
text/css
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
html
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
text/html
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
text
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
text/plain
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Update list.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Classification
\end_layout

\begin_layout Subsection
Basic
\end_layout

\begin_layout Standard
Simple properties in the request are checked, and their valued saved as
 a classification property.
 This property is used for grouping and for further analysis.
\end_layout

\begin_layout Description
Successful
\begin_inset space ~
\end_inset

request The status of the request is 200-299 or 304.
\end_layout

\begin_layout Description
Unsuccessful
\begin_inset space ~
\end_inset

request The status is 100-199 or 300-303 or 305-599.
\end_layout

\begin_layout Description
Failed
\begin_inset space ~
\end_inset

request The log file format is incomplete or the status is null or below
 100 or above 599.
\end_layout

\begin_layout Description
Same
\begin_inset space ~
\end_inset

domain The request is to the same domain that was first visited.
\end_layout

\begin_layout Description
Subdomain The request is to a subdomain of the domain that was first visited.
\end_layout

\begin_layout Description
Internal
\begin_inset space ~
\end_inset

domain The request is to the same domain or a subdomain of the domain that
 was first visited.
\end_layout

\begin_layout Description
External
\begin_inset space ~
\end_inset

domain The request is not to an internal domain.
\end_layout

\begin_layout Description
Secure
\begin_inset space ~
\end_inset

request The request is using HTTPS.
\end_layout

\begin_layout Subsection
Disconnect.me
\end_layout

\begin_layout Standard
The URLs in the extended data contains lists of domain components.
 As the disconnect list of blocked domains is prepared for lookups by domains,
 each of the matching domains (including shorter domain components) are
 extracted with organization, organization URL and domain category.
\end_layout

\begin_layout Subsection
Public Suffix List
\end_layout

\begin_layout Standard
The public suffix list is prepared for lookups per domain component.
 Each request's domain (including shorter domain components) is checked
 against it, and any matching public suffixes are kept in an array.
\end_layout

\begin_layout Section
Analysis
\end_layout

\begin_layout Standard
An analysis, where request classifications are counted, summed and the coverage
 calculated, is performed as an automated step.
\end_layout

\begin_layout Subsection
Origin
\end_layout

\begin_layout Standard
The origin domains are grouped separately from the requests that stemmed
 from them.
\end_layout

\begin_layout Subsection
Requested URLs
\end_layout

\begin_layout Standard
All requests are represented with their domain, and other classifications.
\end_layout

\begin_layout Subsection
Distinct requested URLs
\end_layout

\begin_layout Standard
Even if two requests originating from a domain, it is only counted once.
 This gives the possibility to calculate coverage per domain later on.
\end_layout

\begin_layout Subsection
Request/domain counts
\end_layout

\begin_layout Standard
All the numbers from all domains added together.
\end_layout

\begin_layout Subsection
Request/domain coverage
\end_layout

\begin_layout Standard
The summed up counts divided by either the total request count (for requested
 URLs) or the number of domains in the current group (for distinct requested
 URLs).
 This gives a coverage percentage - either for the percentage of the number
 of requests, or domains that has the value.
\end_layout

\begin_layout Subsection
Grouping
\end_layout

\begin_layout Standard
In order to not make too broad assumptions, some grouping was performed.
 The analysis was performed the same way on each of these groups.
\end_layout

\begin_layout Subsubsection
Origin domain status
\end_layout

\begin_layout Standard
The origin domain's download status was checked, and grouped into both unfiltere
d and non-failed groups.
\end_layout

\begin_layout Subsubsection
Requested URLs
\end_layout

\begin_layout Standard
The list of requested URLs was grouped into unfiltered, internal and external
 URLs.
\end_layout

\begin_layout Subsection
Tree
\end_layout

\begin_layout Standard
A tree representation of the output after grouping.
 The origin is represents the original request and the requested URLs
\end_layout

\begin_layout Itemize
Unfiltered origin domains
\end_layout

\begin_deeper
\begin_layout Itemize
Origin
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Unfiltered URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Internal URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
External URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Itemize
Non-failed origin domains
\end_layout

\begin_deeper
\begin_layout Itemize
Origin
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Unfiltered URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Internal URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
External URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Section
Questions
\end_layout

\begin_layout Standard
Where the aggregate analysis isn't enough, there are custom questions.
 These questions/queries can be run against any previous intermediate step
 in the process, as they are saved to disk.
\end_layout

\begin_layout Subsection
Google Tag Manager
\end_layout

\begin_layout Standard
One of the questions posed beforehand was if Google Tag Manager would have
 an impact upon results.
 This question is answered in 
\begin_inset CommandInset ref
LatexCommand vref
reference "sub:Google-Tag-Manager"

\end_inset

 with the help of this data.
\end_layout

\begin_layout Subsection
Origins with redirects
\end_layout

\begin_layout Standard
Looking at preliminary results, a large portion of domains yielded a redirect
 as the initial response.
 In order to look at these redirects specifically, and determine if they
 redirect to an internal or external domain, a specific question was written.
\end_layout

\begin_layout Chapter
Results
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Answer questions posed earlier.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Differences between data sets
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Top content
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Top public suffixes
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Top recognized domains
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Top recognized organizations
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about top organizations.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Top recognized domain categories
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about.
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Discussion and conclusions
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Compare with expected results.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about disconnect's content category.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about the 
\emph on
.se health status
\emph default
 report findings.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about the 
\emph on
Follow the Money: Understanding Economics of Online Aggregation and Advertising
\emph default
 report findings.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about 
\emph on
Third-party Identity Management Usage on the Web
\emph default
 report findings.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Automated, scalable data collection and repeatable analysis
\end_layout

\begin_layout Standard
One of the prerequisites for the type of analysis performed in this thesis
 was that all collection should be automated, repeatable and be able to
 handle tens of thousands of domains at a time.
 This goal has been achieved, and a specialized framework for analyzing
 web pages's HTTP requests has been built.
 While most of the code has been tailored to answer questions posed in this
 thesis, it is also built to be extendable.
 Separate questions can be written, to query data from any stage in the
 data preparation or analysis.
 Tools have been written to easily download and compare separate datasets.
\end_layout

\begin_layout Standard
It is hard to convince other researchers to use code with a scope this narrow,
 as it might not fulfill all of their wishes at once.
 Fortunately, the code is easy to run, and with proper documentation other
 groups should be able to at least test simple theories regarding web sites.
 Some of the lists of domains used as input are publicly available, and
 thus results can also be shared.
 This should encourage other groups, as looking at example data might spark
 interest.
\end_layout

\begin_layout Chapter
Future work
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Mention further grouping, digging into the data.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Mention sharing data when using non-private lists.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Mention the possibility to educate users with a webpage.
\end_layout

\end_inset


\end_layout

\begin_layout Section
Other views on the same data
\end_layout

\begin_layout Subsection
P3P analysis
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write about P3P analysis.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Cookie syncing
\end_layout

\begin_layout Standard
A recent large-scale study
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://securehomes.esat.kuleuven.be/~gacar/persistent/the_web_never_forgets.pdf"

\end_inset


\end_layout

\end_inset

 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Insert proper reference.
\end_layout

\end_inset

 included a cookie syncing privacy analysis.
 It was shown that unique user identifiers were shared between different
 third parties.
 IDs can be shared in different ways.
 If both third parties exist on the same page, they can be shared through
 scripts or by looking for any IDs in the location URL.
 They can also be shared by one third party sending requests to a second
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
A fourth party?
\end_layout

\end_inset

 third party, either by leaking the location URL as a HTTP referrer or by
 embedding it in the request URL.
 In crawls of Alexa's top 3000 domains, one third party script in particular
 sends requests with synced IDs to 25 domains; the IDs were eventually are
 shared with 43 domains.
\end_layout

\begin_layout Standard
The study used a modified Firefox browser to look at values stored in cookies,
 showing that a user's browsing history could be reconstructed from 1.4%
 to 11%.
 
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Write more about the study and how it might have been implemented here.
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Time plan
\end_layout

\begin_layout Standard
The time plan has been scrapped, due to unplanned conferences, holidays
 and vacations.
\end_layout

\begin_layout Section
Completed activities and milestones
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-01-14 Brainstorming a thesis subject with company supervisor Patrik
 Wallström.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-01-28 Brainstorming a thesis subject with examiner Niklas Carlsson.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-02-07 Finalized the subject proposal, submitted to examiner and company
 supervisor.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-03-07 Initial subject discussion meeting at .SE, with company supervisor
 Staffan Hagnell.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-03-18 First subject draft ready and sent to examiner, company supervisors
 and other interested parties.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-03-31 Subject draft approved by examiner.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W15 Finalize planning report.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W15 Start software development efforts.
\end_layout

\begin_layout Section
Planned activities and milestones
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W19 Half time evaluation.
 Have preliminary results ready, as a progress indicator.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W23 Thesis draft for supervisors to review, then revise according to
 comments.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W24 Thesis draft for the examiner to review, then revise according
 to comments.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W25 Thesis draft for the opposition/peer review, then revise according
 to comments.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2014-W28 Thesis approval for presentation.
\end_layout

\begin_layout Section
Unplanned activities and milestones
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Opponent/peer A student in the same field is required for the opponent/peer
 review.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Presentation The presentation date is required to be held during the regular
 semester period.
 The fall semester starts 2014-09-01.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Publication Thesis must be submitted to LiU E-Press after the presentation.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Evaluation Writing of an individual evaluation report, which is then discussed
 with the examiner and supervisors.
\end_layout

\begin_layout Chapter
Thanks
\end_layout

\begin_layout Standard
\begin_inset Note Greyedout
status open

\begin_layout Plain Layout
Add list of collaborators in getting data, domains, help, advice etcetera.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomencl_print
LatexCommand printnomenclature
set_width "auto"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Content"
description "Information and data that is presented to the user. Includes text, images, video and sound."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Resource"
description "An entity external to the HTML page that requested it. Types of resources include images, video, audio, CSS, javascript and flash animations."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "External resource"
description "A resource downloaded from a domain other than the page that requested it was served from."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "External service"
description "A third party service that delives some kind of resource to the user's browser. The service itself can vary from showing additional information and content, to ads and hidden trackers.\\\\\\\\External services include file hosting services, CDNs, advertisting networks, statistics and analytics collectors, and third party content."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Tracker"
description "An resource external to the visited page, which upon access receives information about the user's system and the page that requested it.\\\\\\\\Basic information in the HTTP request to the resource URL includes user agent (browser vendor, type and version down to the patch level, operating system, sometimes hardware type) referer (the full URL of page that requested the resource), an etag (unique string identifying the data from a previous request to the same resource URL) and cookies (previously set by the tracker)."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "CDN"
description "Content delivery network"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Content delivery network"
description "(CDN) The speed at which data can be delivered is dependant on distance between the user and the server. To reduce latency and download times, a content delivery network places multiple servers with the same content in strategic locations, both geographic and network toplolgy wise, closer to groups of users.\\\\\\\\For example, a CDN could deploy servers in Europe, the US and Australia, and reduce loading speed by setting up the system to automatically use the closest location."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Domain name"
description "A domain name is a human-readable way to navigate to a service on the internet: example.com. Fully qualified domain names (FQDN) have at least two parts - the top level domain name (TLD) and the second-level domain name - but oftentimes more depending on TLD rules and organizational units.\\\\\\\\Domains are also used, for example, as logical entities in regards to security and privacy scopes on the web, often implemented as same-origin policies. As an example, HTTP cookies are bound to domain that set them."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Third-party content"
description "Content served by another organization than the organization serving the explicitly requested web page. Also see external resource."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Third-party service"
description "A service provided by an organization other than the explicitly requested service. Also see external service."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web site"
description "A collection of web pages under the same organization or topic. Often all web pages on a domain is considered a site, but a single domain can also contain multiple sites."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web service"
description "A function performed on the internet, and in this document specifically web sites with a specific purpose directed towards human users. This includes search engines, social networks, online messaging and email as well as content sites such as news sites and blogs."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web browser"
description "Or browser. Software a user utilizes to retrieve, present and traverse information from the web."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".SE"
description "The Internet Infrastructure Foundation. An independent organization for the benefit of the public that promotes the positive development of the internet in Sweden. .SE is responsible for the .se top level domain."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".se"
description "The country code top level domain name for Sweden."

\end_inset


\end_layout

\begin_layout Quote
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "../references/thesis"
options "bibtotoc,plain"

\end_inset


\end_layout

\end_body
\end_document
